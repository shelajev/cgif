package util;

/**
 * Created by shelajev on 14/10/15.
 */

import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.DataBuffer;
import java.awt.image.IndexColorModel;

public class ComponentRenderer {

  private final static int[] colors = { -131587, -6909038, -4342853, -4934734, -9014415, -2303013, -5921886, -2829357, -8488071, -9540759, -10922669, -9869981, -7764091, -11843772,
    -2566185, -13094613, -13423836, -13554390, -11449014, -9343636, -3092530, -13293796, -8623790, -8755890, -14081764, -14476007, -10396325, -9412790, -4415616, -9878229,
    -9286351, -3296887, -3363447, -2702957, -2771056, -3823230, -2178663, -8761038, -3495036, -2637927, -2443894, -995936, -8564434, -2637426, -2705012, -9024723, -12440290,
    -2444411, -10464961, -1855615, -1460853, -11517130, -931943, -1918068, -1522279, -1984624, -1916524, -1390180, -1458799, -12370632, -12238530, -934515, -1784935, -3638453,
    -4623554, -5148362, -4030133, -5939410, -4098230, -3636921, -6002378, -3633830, -5479111, -5412038, -5412555, -3569327, -1724545, -4029096, -5936325, -5544652, -6659271,
    -2510465, -2774146, -8303316, -8368335, -7380677, -4088458, -3562114, -6989522, -4349572, -5533330, -6059157, -7703205, -8295083, -5269126, -8031911, -5467279, -5008530,
    -7769769, -4883632, -5869247, -5342903, -5477055, -4424367, -5476029, -4818620, -5018303, -7111327, -4882100, -4557503, -4098242, -855310, -1316118, -1842462, -5526872,
    -6448487, -10132896, -3816253, -3289909, -14738921, -13949406, -12962253, -6645610, -8685449, -8817035, -4671819, -5592921, -5724507, -9738138, -6777195, -4540233, -3619130,
    -3553081, -1513241, -12899294, -11251634, -7171954, -7303540, -9211794, -5066577, -5198163, -10596288, -10004411, -8426929, -6119265, -6250851, -10264482, -9215411, -4283264,
    -2039585, -3889536, -2244968, -2704751, -10404314, -1389920, -3627390, -8761808, -2378096, -2245487, -2178925, -2772347, -2310002, -2770809, -2377075, -2773373, -2246522,
    -2771831, -9614800, -934255, -12110810, -10661826, -12374496, -1918842, -1985403, -1392498, -1524595, -10859460, -1984886, -11319752, -1851250, -1526651, -11188166, -1783658,
    -1982830, -11126235, -10665943, -1982824, -1259371, -11648459, -1652582, -4145475, -1457516, -4013889, -4164030, -4096955, -4690372, -3636148, -5151179, -5544401, -4491202,
    -4030395, -5150154, -3569586, -4096439, -4627407, -3766194, -4951491, -5084101, -4884418, -5151174, -3572154, -5410755, -6004172, -4096432, -3898287, -3897261, -5345226,
    -3635631, -6069191, -5935041, -3765672, -6923212, -7974354, -7907276, -3430274, -4021641, -3955587, -5994906, -4875658, -5665171, -6257047, -7308707, -8097706, -7505826,
    -5861776, -8229288, -6526912, -4355495, -6001599, -4816816, -5344696, -4356012, -5343164, -4423087, -7439776, -4557240, -4424631, -4950974, -4358069, -4358075, -4950456,
    -6716827, -8159105, -8290692, -4490684, -4883894 };

  public static BufferedImage paintComponent(Component c) {

    CellRendererPane crp = new CellRendererPane();
    c.setSize(c.getPreferredSize());
    layoutComponent(c);
    crp.add(c);

    IndexColorModel icm = new IndexColorModel(8, 256, colors, 0, false, -1,
      DataBuffer.TYPE_BYTE);

    BufferedImage img = new BufferedImage(c.getWidth(), c.getHeight(),
      BufferedImage.TYPE_BYTE_INDEXED, icm);
    crp.paintComponent(img.createGraphics(), c, crp, c.getBounds());
    return img;
  }

  public static void layoutComponent(Component c) {
    synchronized (c.getTreeLock()) {
      c.doLayout();
      if (c instanceof Container)
        for (Component child : ((Container) c).getComponents())
          layoutComponent(child);
    }
  }
}
